(()=>{"use strict";var o,t={769:(o,t,e)=>{const r=window.wp.blocks,i=window.wp.blockEditor,n=window.wp.i18n,c=window.wp.element,a=window.wp.data;var l=e(8117);const d=window.ReactJSXRuntime;(0,r.registerBlockType)("notifima/stock-notification-block",{title:(0,n.__)("Stock Notification Block","notifima"),description:(0,n.__)("This block can be connected to WooCommerce Out-of-Stock and Backorder products to provide a stock notification form for users.","notifima"),category:"woocommerce",icon:"clipboard",supports:{html:!1},attributes:{productId:{type:"number",default:null}},edit:({attributes:o,setAttributes:t})=>{const e=(0,i.useBlockProps)(),[r,s]=(0,c.useState)((0,n.__)("Loading formâ€¦","notifima")),u=(0,a.useSelect)(o=>{const t=o("core/block-editor").getBlocks().find(o=>"woocommerce/single-product"===o.name);return t?.attributes?.productId||null},[]);return(0,c.useEffect)(()=>{u&&u!==o.productId&&t({productId:u})},[u]),(0,c.useEffect)(()=>{u?(0,l.A)({method:"get",url:`${stockNotificationBlock.apiUrl}/${stockNotificationBlock.restUrl}/stock-notification-form?product_id=${u}`,headers:{"X-WP-Nonce":stockNotificationBlock.nonce}}).then(o=>{s(o.data.html||(0,n.__)("Failed to load form.","notifima"))}):s((0,n.__)("No product selected.","notifima"))},[u]),(0,d.jsx)("div",{...e,children:(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})},save:()=>null})}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.m=t,o=[],r.O=(t,e,i,n)=>{if(!e){var c=1/0;for(s=0;s<o.length;s++){for(var[e,i,n]=o[s],a=!0,l=0;l<e.length;l++)(!1&n||c>=n)&&Object.keys(r.O).every(o=>r.O[o](e[l]))?e.splice(l--,1):(a=!1,n<c&&(c=n));if(a){o.splice(s--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var s=o.length;s>0&&o[s-1][2]>n;s--)o[s]=o[s-1];o[s]=[e,i,n]},r.d=(o,t)=>{for(var e in t)r.o(t,e)&&!r.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},r.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},(()=>{var o={174:0};r.O.j=t=>0===o[t];var t=(t,e)=>{var i,n,[c,a,l]=e,d=0;if(c.some(t=>0!==o[t])){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(l)var s=l(r)}for(t&&t(e);d<c.length;d++)n=c[d],r.o(o,n)&&o[n]&&o[n][0](),o[n]=0;return r.O(s)},e=globalThis.webpackChunknotifima=globalThis.webpackChunknotifima||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))})();var i=r.O(void 0,[561],()=>r(769));i=r.O(i)})();