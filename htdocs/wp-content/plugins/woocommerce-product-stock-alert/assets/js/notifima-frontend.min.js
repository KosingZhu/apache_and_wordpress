"use strict";jQuery(function(i){function t(t){t.preventDefault();const n=i(this).closest(".notifima-subscribe-form");i(this).text(frontendLocalizer.processing),i(this).addClass("disabled");const o=n.find(".notifima-email").val(),e=n.find(".notifima-product-id").val(),a=n.find(".notifima-variation-id").val(),s=n.find(".notifima-product-name").val(),r=frontendLocalizer.button_html;i(this).toggleClass("notifima-loader").blur();const c={action:"subscribe_users",nonce:frontendLocalizer.nonce,customer_email:o,product_id:e,product_title:s,variation_id:a};n.append(frontendLocalizer.additional_fields_html),n.find('input[id^="notifima_"]').each(function(){const t=i(this).attr("name"),n=i(this).val();t&&(c[t]=n)}),i.post(frontendLocalizer.ajax_url,c,function(i){(i.status||n.find(".notifima-error-message").remove())&&n.html(i.message),n.find(".notifima-subscribe").replaceWith(r)})}function n(t){t.preventDefault();const n=i(this).parent().parent();i(this).text(frontendLocalizer.processing),i(this).addClass("disabled");const o={action:"unsubscribe_users",nonce:frontendLocalizer.nonce,customer_email:n.find(".notifima-subscribed-email").val(),product_id:n.find(".notifima-product-id").val(),variation_id:n.find(".notifima-variation-id").val()};i.post(frontendLocalizer.ajax_url,o,function(t){t&&n.html(t.message),i(this).removeClass("disabled")})}function o(){const t=Number(i(this).val()),n=Number(i(".notifima-shortcode-subscribe-form").data("product-id"));if(i(".notifima-shortcode-subscribe-form").length&&t){const o={action:"get_subscription_form_for_variation",nonce:frontendLocalizer.nonce,product_id:n,variation_id:t};i.post(frontendLocalizer.ajax_url,o,function(t){i(".notifima-shortcode-subscribe-form").html(t)})}else i(".notifima-shortcode-subscribe-form").html("")}i(document).on("click",".notifima-subscribe",t),i(document).on("click",".notifima-unsubscribe",n),i(document).on("change","input.variation_id",o)});